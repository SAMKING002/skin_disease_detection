<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create an account with DermaVision</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="{{ url_for('static', filename='script.js') }}" defer></script>

</head>
<body>
    <div class="container-fluid d-flex flex-column min-vh-100">
        <div class="row flex-grow-1">
            <!-- Sidebar -->
            <nav class="col-md-3 sidebar d-flex flex-column">
                <h2 class="text-white text-center">DERMAVISION</h2>
                <p class="sidebar-tagline text-white text-center">
                    The smarter way to revolutionize dermatology
                </p>
                <ul class="nav flex-column">
                    <li class="nav-item"><a href="{{ url_for('home') }}" class="nav-link text-white">üè† Home</a></li>
                    <li class="nav-item">
                        <a href="{{ url_for('predicts') }}" class="nav-link text-white">üì∑ Predict Skin Condition</a>                        
                    </li>
                    <li class="nav-item"><a href="{{ url_for('about_us') }}" class="nav-link text-white">‚ÑπÔ∏è About System</a></li>
                    <li class="nav-item"><a href="#" class="nav-link text-white">üîë Sign In / Register</a></li>
                    <li class="nav-item"><a href="{{ url_for('contact') }}" class="nav-link text-white">üìû Contact / Support</a></li>
                </ul>
            </nav>
            
            <main class="col-md-9 d-flex flex-column align-items-center p-3">
                <h2 class="mb-3">Create an Account or Log In to DermaVision</h2>
            
                <!-- Toggle buttons -->
                <div class="mb-3">
                    <button id="showRegister" class="btn btn-success">Register</button>
                    <button id="showLogin" class="btn btn-secondary">Login</button>
                </div>
            
                <!-- Register Form (Default Visible) -->
                <form id="registerForm" action="/register" method="POST" class="w- border p-4 rounded shadow">
                    <h3>Register</h3>
                    <div class="mb-2">
                        <label for="name" class="form-label">Full Name</label>
                        <input type="text" id="name" name="name" class="form-control" required>
                    </div>
                    <div class="mb-2">
                        <label for="idNumber" class="form-label">ID Number</label>
                        <input type="text" id="id_number" name="id_number" class="form-control" required>
                    </div>
                    <div class="mb-2">
                        <label for="address" class="form-label">Address</label>
                        <input type="text" id="address" name="address" class="form-control" required>
                    </div>
                    <div class="mb-2">
                        <label for="phone" class="form-label">Phone</label>
                        <input type="text" id="phone" name="phone" class="form-control" required>
                    </div>
                    <div class="mb-2">
                        <label for="age" class="form-label">Age</label>
                        <input type="number" id="age" name="age" class="form-control" required>
                    </div>
                    <div class="mb-2">
                        <label for="gender" class="form-label">Gender</label>
                        <select id="gender" name="gender" class="form-select" required>
                            <option value="" disabled selected>Select Gender</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div class="mb-2">
                        <label for="username" class="form-label">Username</label>
                        <input type="text" id="username" name="username" class="form-control" required>
                    </div>
                    <div class="mb-3">
                        <label for="password" class="form-label">Password</label>
                        <input type="password" id="password" name="password" class="form-control" required>
                    </div>
                    <button type="submit" class="btn btn-primary w-100">Register</button>
                    <div class="mb-3">
                        <p>Already having an account? <a href="#" id="loginLink">Login</a></p>
                    </div>
                    
                </form>
            
                <!-- Login Form (Initially Hidden) -->
                <form id="loginForm" action="/logins" method="POST" class="w-50 border p-4 rounded shadow" style="display: none;">
                    <h3>Login</h3>
                    <div class="mb-2">
                        <label for="loginUsername" class="form-label">Username</label>
                        <input type="text" id="loginUsername" name="username" class="form-control" required>
                    </div>
                    <div class="mb-3">
                        <label for="loginPassword" class="form-label">Password</label>
                        <input type="password" id="loginPassword" name="password" class="form-control" required>
                    </div>
                    <button type="submit" class="btn btn-primary w-100">Login</button>
                </form>
            </main>
            
            <script>
                document.getElementById("showLogin").addEventListener("click", function() {
                    document.getElementById("registerForm").style.display = "none";
                    document.getElementById("loginForm").style.display = "block";
                });
            
                document.getElementById("showRegister").addEventListener("click", function() {
                    document.getElementById("registerForm").style.display = "block";
                    document.getElementById("loginForm").style.display = "none";
                });
            </script>
            

            
        </div>

        <!-- Footer -->
        <footer class="footer text-center text-orange py-3">
            Techminds Company &copy; 2025 Developed by Engineer Sam and Kevo. All rights reserved.
        </footer>
    </div><!-- Scroll Up Button -->
    <button id="scrollUpBtn" class="scroll-up-btn">‚¨Ü</button>
    <script>
    document.addEventListener("DOMContentLoaded", function () {
        document.getElementById("loginForm").addEventListener("submit", function (event) {
            event.preventDefault();  // Prevent form from reloading page
    
            let formData = {
                username: document.getElementById("loginUsername").value,
                password: document.getElementById("loginPassword").value
            };
    
            fetch("/logins", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify(formData)
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    Swal.fire({
                        icon: "success",
                        title: "Login Successful!",
                        text: data.message,
                        confirmButtonColor: "#28a745"
                    }).then(() => {
                        window.location.href = "/dashboard";  // Redirect after success
                    });
                } else {
                    Swal.fire({
                        icon: "error",
                        title: "Login Failed!",
                        text: data.message,
                        confirmButtonColor: "#dc3545"
                    });
                }
            })
            .catch(error => {
                Swal.fire({
                    icon: "error",
                    title: "Error!",
                    text: "Something went wrong. Please try again later.",
                    confirmButtonColor: "#dc3545"
                });
            });
        });
    });
    </script>
    
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
    document.addEventListener("DOMContentLoaded", function () {
        document.getElementById("registerForm").addEventListener("submit", function (event) {
            event.preventDefault();  // Prevent form from reloading page
    
            let formData = {
                name: document.getElementById("name").value,
                id_number: document.getElementById("id_number").value,
                address: document.getElementById("address").value,
                phone: document.getElementById("phone").value,
                age: document.getElementById("age").value,
                gender: document.getElementById("gender").value,
                username: document.getElementById("username").value,
                password: document.getElementById("password").value
            };
    
            fetch("/register", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify(formData)
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    Swal.fire({
                        icon: "success",
                        title: "success",
                        text: data.message,
                        confirmButtonColor: "#28a745"
                    });
                    document.getElementById("registerForm").reset();  // Clear form after success
                } else {
                    Swal.fire({
                        icon: "error",
                        title: "Error!",
                        text: data.message,
                        confirmButtonColor: "#dc3545"
                    });
                }
            })
            .catch(error => {
                Swal.fire({
                    icon: "error",
                    title: "Error!",
                    text: "Something went wrong. Please try again later.",
                    confirmButtonColor: "#dc3545"
                });
            });
        });
    });
    </script>
    
    <script>
        document.addEventListener("DOMContentLoaded", function () {
        let scrollUpBtn = document.getElementById("scrollUpBtn");

        // Show button when scrolling down
        window.addEventListener("scroll", function () {
        if (window.scrollY > 150) {  // Show button after 300px scroll
            scrollUpBtn.style.display = "block";
        } else {
            scrollUpBtn.style.display = "none";
        }
       });

       // Scroll to top smoothly when button is clicked
       scrollUpBtn.addEventListener("click", function () {
         window.scrollTo({
            top: 0,
            behavior: "smooth"
        });
       });
     });

    </script>
    <script>
       document.getElementById("loginLink").addEventListener("click", function (event) {
        event.preventDefault(); // Prevent page jump
        document.getElementById("registerForm").style.display = "none";
        document.getElementById("loginForm").style.display = "block";
    });
    </script>
 
</body>
</html>